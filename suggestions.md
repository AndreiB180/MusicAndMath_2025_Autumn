# 实验建议与改进方向

## 1. 初始种群生成策略
目前的实现采用了完全随机生成初始种群的方法。为了提高生成旋律的音乐性，建议尝试以下改进：
- **基于现有乐曲片段**：从经典的 MIDI 文件中提取 4 小节片段作为初始种群，这样算法可以从“好听”的基因开始进化。
- **受限随机生成**：在随机生成时加入调性约束（如只生成 C 大调音阶内的音符），减少完全无序的噪音。

## 2. 遗传算子的优化
- **变异操作 (Mutation)**：目前的变异是单点随机替换。建议增加“邻域变异”（将音符上下移动 1-2 度）或“片段变异”（重新生成一小段节奏）。
- **交叉操作 (Crossover)**：目前的单点交叉可能会破坏乐句的完整性。可以尝试“小节交叉”，即以小节为单位交换基因。

## 3. 适应度函数的深化
- **多目标优化**：目前的适应度函数是单一维度的。可以尝试结合“乐理规则”和“统计规律”，例如 `Total_Fitness = w1 * Theory_Score + w2 * Statistical_Score`。
- **交互式进化 (Interactive GA)**：虽然全人工评分太累，但可以采用“混合模式”：算法先筛选出前 10% 的个体，再由人工进行微调或打分。

## 4. 算法效率与收敛性
- **精英保留策略 (Elitism)**：在代码中加入显式的精英保留机制，确保每一代最优秀的 1-2 个个体直接进入下一代，防止优良基因在交叉变异中丢失。
- **自适应参数**：随着进化的进行，动态调整变异率。初期高变异率以探索解空间，后期低变异率以收敛到局部最优。
